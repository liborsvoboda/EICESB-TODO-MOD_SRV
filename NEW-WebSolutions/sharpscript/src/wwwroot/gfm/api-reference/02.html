<div class="gfm"><div class="highlight highlight-source-cs"><pre><span class="pl-k">var</span> <span class="pl-smi">fs</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">FileSystemVirtualFiles</span>(<span class="pl-s"><span class="pl-pds">"</span>~/template-files<span class="pl-pds">"</span></span>.<span class="pl-en">MapProjectPath</span>());
<span class="pl-k">foreach</span> (<span class="pl-k">var</span> <span class="pl-smi">file</span> <span class="pl-k">in</span> <span class="pl-smi">fs</span>.<span class="pl-en">GetAllMatchingFiles</span>(<span class="pl-s"><span class="pl-pds">"</span>*.html<span class="pl-pds">"</span></span>))
{
    <span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-en">MyAllowFile</span>(<span class="pl-smi">file</span>)) <span class="pl-k">continue</span>;
    <span class="pl-k">using</span> (<span class="pl-k">var</span> <span class="pl-smi">stream</span> <span class="pl-k">=</span> <span class="pl-smi">file</span>.<span class="pl-en">OpenRead</span>())
    {
        <span class="pl-smi">context</span>.<span class="pl-smi">VirtualFiles</span>.<span class="pl-en">WriteFile</span>(<span class="pl-smi">file</span>.<span class="pl-smi">VirtualPath</span>, <span class="pl-smi">stream</span>);
    }
}</pre></div>
</div>