<div class="gfm"><div class="highlight highlight-text-html-handlebars"><pre><span class="pl-c"><span class="pl-c">&lt;!--</span></span>
<span class="pl-c">db sqlite</span>
<span class="pl-c">db.connection ~/../apps/northwind.sqlite</span>
<span class="pl-c"><span class="pl-c">--&gt;</span></span>

&lt;<span class="pl-ent">link</span> <span class="pl-e"><span class="pl-e">rel</span>=</span><span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span> <span class="pl-e"><span class="pl-e">href</span>=</span><span class="pl-s"><span class="pl-pds">"</span>https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css<span class="pl-pds">"</span></span>&gt;
<span class="pl-s1">&lt;<span class="pl-ent">style</span>&gt;<span class="pl-ent">body</span> {<span class="pl-c1"><span class="pl-c1">padding</span></span>:<span class="pl-c1">1<span class="pl-k">em</span></span>} <span class="pl-ent">caption</span>{<span class="pl-c1"><span class="pl-c1">caption-side</span></span>:<span class="pl-c1">top</span>;}&lt;/<span class="pl-ent">style</span>&gt;</span>
&lt;<span class="pl-ent">h1</span> <span class="pl-e"><span class="pl-e">class</span>=</span><span class="pl-s"><span class="pl-pds">"</span>py-2<span class="pl-pds">"</span></span>&gt;Order Report #<span class="pl-c1">{{</span><span class="pl-v">id</span><span class="pl-c1">}}</span>&lt;/<span class="pl-ent">h1</span>&gt;

<span class="pl-c1">{{</span> `<span class="pl-e"><span class="pl-v">SELECT</span></span> <span class="pl-e"><span class="pl-v">o.Id</span></span>, <span class="pl-e"><span class="pl-v">OrderDate</span></span>, <span class="pl-e"><span class="pl-v">CustomerId</span></span>, <span class="pl-e"><span class="pl-v">Freight</span></span>, <span class="pl-e"><span class="pl-v">e.Id</span></span> <span class="pl-e"><span class="pl-v">as</span></span> <span class="pl-e"><span class="pl-v">EmployeeId</span></span>, <span class="pl-e"><span class="pl-v">s.CompanyName</span></span> <span class="pl-e"><span class="pl-v">as</span></span> <span class="pl-e"><span class="pl-v">ShipVia</span></span>, 
           <span class="pl-e"><span class="pl-v">ShipAddress</span></span>, <span class="pl-e"><span class="pl-v">ShipCity</span></span>, <span class="pl-e"><span class="pl-v">ShipPostalCode</span></span>, <span class="pl-e"><span class="pl-v">ShipCountry</span></span>
      <span class="pl-e"><span class="pl-v">FROM</span></span> <span class="pl-s"><span class="pl-pds">"</span>Order<span class="pl-pds">"</span></span> <span class="pl-e"><span class="pl-v">o</span></span>
           <span class="pl-e"><span class="pl-v">INNER</span></span> <span class="pl-e"><span class="pl-v">JOIN</span></span>
           <span class="pl-e"><span class="pl-v">Employee</span></span> <span class="pl-e"><span class="pl-v">e</span></span> <span class="pl-e"><span class="pl-v">ON</span></span> <span class="pl-e"><span class="pl-v">o.EmployeeId</span></span> = <span class="pl-e"><span class="pl-v">e.Id</span></span>
           <span class="pl-e"><span class="pl-v">INNER</span></span> <span class="pl-e"><span class="pl-v">JOIN</span></span>
           <span class="pl-e"><span class="pl-v">Shipper</span></span> <span class="pl-e"><span class="pl-v">s</span></span> <span class="pl-e"><span class="pl-v">ON</span></span> <span class="pl-e"><span class="pl-v">o.ShipVia</span></span> = <span class="pl-e"><span class="pl-v">s.Id</span></span>
     <span class="pl-e"><span class="pl-v">WHERE</span></span> <span class="pl-e"><span class="pl-v">o.Id</span></span> = @<span class="pl-e"><span class="pl-v">id</span></span>` 
  |&gt; <span class="pl-e"><span class="pl-v">dbSingle</span></span>({ <span class="pl-e"><span class="pl-v">id</span></span> }) |&gt; <span class="pl-e"><span class="pl-v">to</span></span> =&gt; <span class="pl-e"><span class="pl-v">order</span></span> <span class="pl-c1">}}</span>

<span class="pl-c1">{{</span><span class="pl-c1">#with</span> <span class="pl-v">order</span><span class="pl-c1">}}</span>
  <span class="pl-c1">{{</span> <span class="pl-s"><span class="pl-pds">"</span>table table-striped<span class="pl-pds">"</span></span> |&gt; <span class="pl-e"><span class="pl-v">to</span></span> =&gt; <span class="pl-e"><span class="pl-v">className</span></span> <span class="pl-c1">}}</span>
<span class="pl-s1">  &lt;<span class="pl-ent">style</span>&gt;<span class="pl-ent">table</span> {<span class="pl-c1"><span class="pl-c1">border</span></span>: <span class="pl-c1">5<span class="pl-k">px</span></span> <span class="pl-c1">solid</span> <span class="pl-c1">transparent</span>} <span class="pl-ent">th</span> {<span class="pl-c1"><span class="pl-c1">white-space</span></span>: <span class="pl-c1">nowrap</span>}&lt;/<span class="pl-ent">style</span>&gt;</span>
  
  &lt;<span class="pl-ent">div</span> <span class="pl-e"><span class="pl-e">style</span>=</span><span class="pl-s"><span class="pl-pds">"</span>display:flex<span class="pl-pds">"</span></span>&gt;
      <span class="pl-c1">{{</span> <span class="pl-v">order</span> |&gt; <span class="pl-e"><span class="pl-v">htmlDump</span></span>({ <span class="pl-e"><span class="pl-v">caption</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Order Details<span class="pl-pds">'</span></span>, <span class="pl-e"><span class="pl-v">className</span></span> }) <span class="pl-c1">}}</span>
      <span class="pl-c1">{{</span> `<span class="pl-e"><span class="pl-v">SELECT</span></span> * <span class="pl-e"><span class="pl-v">FROM</span></span> <span class="pl-e"><span class="pl-v">Customer</span></span> <span class="pl-e"><span class="pl-v">WHERE</span></span> <span class="pl-e"><span class="pl-v">Id</span></span> = @<span class="pl-e"><span class="pl-v">CustomerId</span></span>` 
         |&gt; <span class="pl-e"><span class="pl-v">dbSingle</span></span>({ <span class="pl-e"><span class="pl-v">CustomerId</span></span> }) |&gt; <span class="pl-e"><span class="pl-v">htmlDump</span></span>({ <span class="pl-e"><span class="pl-v">caption</span></span>: `<span class="pl-e"><span class="pl-v">Customer</span></span> <span class="pl-e"><span class="pl-v">Details</span></span>`, <span class="pl-e"><span class="pl-v">className</span></span> }) <span class="pl-c1">}}</span>
      <span class="pl-c1">{{</span> `<span class="pl-e"><span class="pl-v">SELECT</span></span> <span class="pl-e"><span class="pl-v">Id</span></span>, <span class="pl-e"><span class="pl-v">LastName</span></span>, <span class="pl-e"><span class="pl-v">FirstName</span></span>, <span class="pl-e"><span class="pl-v">Title</span></span>, <span class="pl-e"><span class="pl-v">City</span></span>, <span class="pl-e"><span class="pl-v">Country</span></span>, <span class="pl-e"><span class="pl-v">Extension</span></span> <span class="pl-e"><span class="pl-v">FROM</span></span> <span class="pl-e"><span class="pl-v">Employee</span></span> <span class="pl-e"><span class="pl-v">WHERE</span></span> <span class="pl-e"><span class="pl-v">Id</span>=</span>@<span class="pl-e"><span class="pl-v">EmployeeId</span></span>` 
         |&gt; <span class="pl-e"><span class="pl-v">dbSingle</span></span>({ <span class="pl-e"><span class="pl-v">EmployeeId</span></span> }) |&gt; <span class="pl-e"><span class="pl-v">htmlDump</span></span>({ <span class="pl-e"><span class="pl-v">caption</span></span>: `<span class="pl-e"><span class="pl-v">Employee</span></span> <span class="pl-e"><span class="pl-v">Details</span></span>`, <span class="pl-e"><span class="pl-v">className</span></span> }) <span class="pl-c1">}}</span>
  &lt;/<span class="pl-ent">div</span>&gt;

  <span class="pl-c1">{{</span> `<span class="pl-e"><span class="pl-v">SELECT</span></span> <span class="pl-e"><span class="pl-v">p.ProductName</span></span>, ${<span class="pl-e"><span class="pl-v">sqlCurrency</span></span>(<span class="pl-s"><span class="pl-pds">"</span>od.UnitPrice<span class="pl-pds">"</span></span>)} <span class="pl-e"><span class="pl-v">UnitPrice</span></span>, <span class="pl-e"><span class="pl-v">Quantity</span></span>, <span class="pl-e"><span class="pl-v">Discount</span></span>
        <span class="pl-e"><span class="pl-v">FROM</span></span> <span class="pl-e"><span class="pl-v">OrderDetail</span></span> <span class="pl-e"><span class="pl-v">od</span></span>
             <span class="pl-e"><span class="pl-v">INNER</span></span> <span class="pl-e"><span class="pl-v">JOIN</span></span>
             <span class="pl-e"><span class="pl-v">Product</span></span> <span class="pl-e"><span class="pl-v">p</span></span> <span class="pl-e"><span class="pl-v">ON</span></span> <span class="pl-e"><span class="pl-v">od.ProductId</span></span> = <span class="pl-e"><span class="pl-v">p.Id</span></span>
       <span class="pl-e"><span class="pl-v">WHERE</span></span> <span class="pl-e"><span class="pl-v">OrderId</span></span> = @<span class="pl-e"><span class="pl-v">id</span></span>`
      |&gt; <span class="pl-e"><span class="pl-v">dbSelect</span></span>({ <span class="pl-e"><span class="pl-v">id</span></span> }) 
      |&gt; <span class="pl-e"><span class="pl-v">htmlDump</span></span>({ <span class="pl-e"><span class="pl-v">caption</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Line Items<span class="pl-pds">"</span></span>, <span class="pl-e"><span class="pl-v">className</span></span> }) <span class="pl-c1">}}</span>
<span class="pl-c1">{{</span><span class="pl-c1">else</span><span class="pl-c1">}}</span>
  <span class="pl-c1">{{</span> `<span class="pl-e"><span class="pl-v">There</span></span> <span class="pl-e"><span class="pl-v">is</span></span> <span class="pl-e"><span class="pl-v">no</span></span> <span class="pl-e"><span class="pl-v">Order</span></span> <span class="pl-e"><span class="pl-v">with</span></span> <span class="pl-e"><span class="pl-v">id</span></span>: ${<span class="pl-e"><span class="pl-v">id</span></span>}` <span class="pl-c1">}}</span>
<span class="pl-c1">{{</span><span class="pl-c1">/with</span><span class="pl-c1">}}</span></pre></div>
</div>