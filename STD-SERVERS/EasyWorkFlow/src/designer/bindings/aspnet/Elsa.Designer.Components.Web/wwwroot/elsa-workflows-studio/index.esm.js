import{S as o}from"./p-f3f2f442.js";export{A as ActivityTraits,O as OrderBy,S as SyntaxNames,W as WorkflowContextFidelity,a as WorkflowPersistenceBehavior,b as WorkflowStatus,c as WorkflowTestActivityMessageStatus,g as getVersionOptionsString}from"./p-f3f2f442.js";import{E as i}from"./p-9f020d74.js";export{E as EventTypes}from"./p-9f020d74.js";export{A as ActivityIconProvider,a as activityIconProvider}from"./p-e25d43d7.js";export{C as ConfirmDialogService,c as confirmDialogService}from"./p-7987683a.js";export{T as ToastNotificationService,t as toastNotificationService}from"./p-b8463f94.js";export{a as createElsaClient,c as createHttpClient}from"./p-134edcbd.js";import{e as r}from"./p-93cac3a6.js";export{e as eventBus}from"./p-93cac3a6.js";export{F as FeaturesDataManager,f as featuresDataManager}from"./p-f4e44994.js";export{P as PluginManager,p as pluginManager}from"./p-496144f9.js";export{P as PropertyDisplayManager,p as propertyDisplayManager}from"./p-7e271565.js";export{M as MonacoEditorDialogService,m as monacoEditorDialogService}from"./p-51b719ea.js";import{a as n,H as l}from"./p-4745c03b.js";import"./p-a3b5bd35.js";import{h}from"./p-6f3ac5fa.js";import"./p-82db2ff5.js";import"./p-949334ec.js";import{P as w}from"./p-88678d9c.js";export{s as DashboardState}from"./p-e5205878.js";export{d as DashboardTunnel}from"./p-96c5f56a.js";import"./p-ee0b9025.js";import"./p-80de33dc.js";import"./p-83f217d4.js";const u={ConnectionCreated:"connection-created"};class y{constructor(){r.on(i.ActivityDesignDisplaying,this.onActivityDisplaying),r.on(i.Dashboard.Appearing,this.onLoadingMenu)}onActivityDisplaying(t){const i=t.activityModel;if(!i.type.endsWith("Webhook"))return;const e=(i.properties||[]).find((t=>"Path"==t.name))||{name:"Path",expressions:{Literal:"",syntax:o.Literal}},a=h(e.expressions[e.syntax||o.Literal]);t.bodyDisplay=`<p>${a}</p>`}onLoadingMenu(t){t.data.menuItems=[...t.data.menuItems,["webhook-definitions","Webhook Definitions"]],t.data.routes=[...t.data.routes,["webhook-definitions","elsa-studio-webhook-definitions-list",!0],["webhook-definitions/:id","elsa-studio-webhook-definitions-edit",!1]]}}let j=null,v=null;class x{constructor(t){this.serverUrl=t.serverUrl,r.on(i.WorkflowRegistryLoadingColumns,this.onLoadingColumns),r.on(i.WorkflowRegistryUpdating,this.onUpdating)}onLoadingColumns(t){t.data={headers:[["Enabled"]],hasContextItems:!0}}async onUpdating(t){const e=await async function(t){if(v)return v;const e=await function(t){if(j)return j;const e={baseURL:t};r.emit(i.HttpClientConfigCreated,this,{config:e});const a=n.create(e),s=new l(a);return r.emit(i.HttpClientCreated,this,{service:s,httpClient:a}),j=a}(t);return v={workflowSettingsApi:{list:async()=>(await e.get("v1/workflow-settings")).data,save:async t=>(await e.post("v1/workflow-settings",t)).data,delete:async t=>{await e.delete(`v1/workflow-settings/${t}`)}}},v}(this.serverUrl),a=(await e.workflowSettingsApi.list()).find((i=>i.workflowBlueprintId==t.params[0]&&i.key==t.params[1]));null!=a&&await e.workflowSettingsApi.delete(a.id);const s={workflowBlueprintId:t.params[0],key:t.params[1],value:t.params[2]};await e.workflowSettingsApi.save(s),await r.emit(i.WorkflowRegistryUpdated,this)}}class k{constructor(t){this.initialize=async()=>{const t=this.options,{domain:i}=t;if(!i||0==i.trim().length)return;if(this.auth0=await w(t),await this.auth0.isAuthenticated())return;if(window.location.search.includes("code="))try{return await this.auth0.handleRedirectCallback(),void window.history.replaceState({},document.title,"/")}catch(t){return void console.log("Error parsing redirect:",t)}const e={redirect_uri:window.location.origin};await this.auth0.loginWithRedirect(e)},this.configureAuthMiddleware=async t=>{const i=this.auth0;t.service.register({async onRequest(t){const e=await i.getTokenSilently();return e&&(t.headers=Object.assign(Object.assign({},t.headers),{Authorization:`Bearer ${e}`})),t}})},this.options=t,r.on(i.Root.Initializing,this.initialize),r.on(i.HttpClientCreated,this.configureAuthMiddleware)}}class D{constructor(){r.on(i.ActivityDesignDisplaying,this.onActivityDisplaying),r.on(i.Dashboard.Appearing,this.onLoadingMenu)}onActivityDisplaying(t){const i=t.activityModel;if(!i.type.endsWith("Manager"))return;const e=(i.properties||[]).find((t=>"Path"==t.name))||{name:"Path",expressions:{Literal:"",syntax:o.Literal}},a=h(e.expressions[e.syntax||o.Literal]);t.bodyDisplay=`<p>${a}</p>`}onLoadingMenu(t){t.data.menuItems=[...t.data.menuItems,["credential-manager","Credential Manager"]],t.data.routes=[...t.data.routes,["credential-manager","elsa-credential-manager-items-list",!0]]}}export{k as Auth0Plugin,D as CredentialManagerPlugin,u as FlowchartEvents,y as WebhooksPlugin,x as WorkflowSettingsPlugin};